# Chapter 5. 네트워크 및 콘텐츠 전송 서비스
## 📌 네트워크 중요 용어 익히기

### IP 주소(Address)는 네트워크의 번지(주소)

- 웹 서버의 위치 : 데이터 센터 or 클라우드 서비스
- 웹 서버에 접근하기 위해서는 웹 서버가 그곳에 있다는 특정 정보 필요 → `IP 주소`
- 표준 : IPv4
    - 4개의 숫자를 점으로 구분해 표시

> 요즘은 인터넷에 접속 기기 증가 → IPv6 주목 받고 있음. BUT 보편적으로 보급되지는 않아서 여기선 IPv4 기준으로 설명
> 

### 퍼블릭 IP 주소와 프라이빗 IP 주소

- `퍼블릭 IP 주소` vs `프라이빗 IP 주소`
    - 퍼블릭 IP 주소 : 전 세계에서 식별 가능
    - 프라이빗 IP 주소 : LAN 내에서만 식별 가능
- 프라이빗 IP 주소로 사용할 수 있는 범위가 정해져 있고, 나머지는 퍼블릭 IP 주소

### CIDR 블록으로 IP 주소 범위 결정

- `CIDR` : IP 주소를 이용해 네트워크 범위를 정의하는 것
- IP 주소를 나타내는 숫자열은 크게 `네트워크` 부분과 `호스트` 부분으로 나눌 수 있음.
- 다음은 Amazon VPC의 기본 VPC의 CIDR 블록
    
    ```json
    172.31.0.0 /16
    
    2진수 표기 : 10101100 . 00011111 . 00000000 . 00000000
    서브넷 마스크 11111111 . 11111111 . 00000000 . 00000000
    ```
    
    - IP 주소 다음에 /와 숫자로 네트워크 범위를 표기한다.
    - ⭐️ `/16` : 서브넷 마스크라고 하며 IP 주소를 사용해 네트워크 범위를 정의한다면 보통 이 표기를 사용. (10진수로 표기)
        - `/16`이면 상위 16비트가 네트워크 부분임. 2진수 표기로 왼쪽에서 16번째까지 1로 표기된 부분
    - `0` : 첫 번째 0이 호스트에 해당. /16의 경우 하위 /16비트가 해당. 이 경우 사용할 수 있는 주소는 2^16개

### 방화벽에서 허용된 통신만 통과

- `방화벽` : 보안 휘협으로부터 시스템을 지키기 위해 사용하는 것
- 종류 : 하드웨어 형태의 방화벽 / 소프트웨어 형태로 서버에 설치돼 동작하는 방화벽
    - ex) 윈도우 PC ‘보안센터’ 설정 → 방화벽 설치되어 있음
- AWS에서는 보안그룹이나 네트워크 ACL

### 부하 분산을 위해 여러 서버에 접속을 분배

- 많은 사용자가 사용하는 시스템 → `부하 분산` 고려 필요
- `로드 밸런서` : 서버를 여러 대 구성해 각 서버가 처리를 나눠서 할 수 있게 구축하는 장치

### 라우팅 및 라우팅 테이블

- `라우터`가 최적의 경로를 찾아서 경로를 결정하고 연결해줌.
- 라우팅 : 라우터가 원하는 IP 주소를 향한 경로를 결정하는 것
- 어떻게 라우팅하는 게 효율이 좋을지 결정해야 함.
- 각 라우터는 소유한 경로 정보를 기반으로 목적지 IP 주소를 향해 이동해야 하는 네트워크를 결정하는데, 이 경로 정보를 `라우팅 테이블`이라고 함.
    
    ⇒ 라우터가 소유한 네트워크 지도
    
- AWS에서는 Amazon VPC의 라우팅 테이블이라는 기능이 이에 해당
    - 각 AWS 서비스에 대해 어떤 엔드포인트를 경유할지와 같은 경로 정보 관리 가능

### 도메인 이름과 IP 주소를 연결하는 DNS

- `도메인` : [OO.com](http://OO.com) 과 같이 해당 문자열에 표시되는 기업, 단체 등이 제공하는 사이트 주소를 정의
    - 점으로 연결된 문자열로 구성돼 있으며 기업 이름과 단체 이름을 표현하는 경우가 많음.
- 도메인 이름에는 IP 주소가 연결되어 있어 도메인 이름으로만으로 접속 가능
- `DNS` : 우리 대신 도메인 이름에 연결된 IP 주소를 찾아줌. 이러한 DNS의 기능을 `이름 해석`이라 함.

## 📌 VPC에서 VPC, 외부 서비스, 온프레미스와의 연결

### VPC와 외부 네트워크 연결

- 다른 VPC나 VPC 외 다른 AWS 서비스와 연결하는 기능을 소개한다.
- `VPC 피어링` : 서로 다른 VPC를 연결해 통신 가능
    - 주의 : 서로 연결된 VPC의 CIDR 블록은 겹치면 안됨.
- `AWS Transit Gateway` : VPC 연결을 하나의 중앙 허브에서 관리 가능
    - 주의 : 요금이 VPC 피어링보다 높음
    - 추천 : 많은 VPC 사용할 때

### VPC와 VPC 외 AWS 서비스를 연결

- S3 등 외부에서 동작하는 AWS 서비스는 보통 인터넷으로 통신
- BUT `VPC 엔드포인트`를 이용하면 프라이빗 네트워트로 통신 가능
    - 인터넷을 통하지 않고 AWS 내부 네트워크를 통해 연결 가능
- VPC 엔드포인트를 설정한 VPC는 S3 와 같은 다른 AWS 서비스에 직접 접근 가능
- `게이트웨이 엔드포인트` : S3나 Dynamo DB에서 사용하는 VPC 엔드포인트
    - AWS 서비스와의 통신은 퍼블릭 IP 사용
    - S3와 Dynamo DB만 지원
- `인터페이스 엔드포인트` : `AWS PrivateLink` 기능을 사용해 서브넷에 서비스 접속용 ENI(네트워크 인터페이스)를 생성해 프라이빗 IP로 통신
    - 많은 AWS 지원

### VPC와 온프레미스 네트워크 연결

- VPC는 온프레미스 네트워크와도 연결 가능
- 연결 방법 몇 가지를 소개한다.
- `AWS Site-to-Site VPN`
    - 온프레미스 환경의 네트워크와 VPC를 VPN으로 연결하는 기능
    - VPN : Virtual Private Network → 가상으로 프라이빗 네트워크 구성해 통신하는 기술
        - VPN에 접속하면 외부 네트워크와 프라이빗 IP주소로 통신 가능
    - 프라이빗 접속 방법 : 온프레미스 환경에 있는 라우터 기기에 AWS 접속을 위한 설정을 하고 AWS에도 접속 설정
    - 프라이빗이라고는 하지만 인터넷을 통해 통신이 이루어짐. IPsec VPN이라는 기술을 사용해 인터넷에 가상으로 전용 네트워크를 만드는 형태
- `AWS Client VPN`
    - 온프레미스 환경이 아니라 특정 단말과 비공개로 연결하고 싶은 경우 사용
- `AWS Direct Connect`
    - AWS와 온프레미스 환경을 전용선으로 연결
    - AWS 데이터 센터와 직접 연결하응 게 아니라 Direct Connect 로케이션이라는 기존 연결 지점을 통해 연결
    - VPN 연결과 비교 : 고품질 네트워크 사용 가능 / 이용비용이 높음 / 서비스 이용 준비 기간이 길다
