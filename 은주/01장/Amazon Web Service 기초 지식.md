## Chapter 1. Amazon Web Service 기초 지식

### 온프레미스 vs. 클라우드

- 온프레미스 : 사용자가 **관리하는 시설 내에, 서버를 설치**하여 운용하는 환경
    - 자체적으로 관련 기기를 준비하고 설정해야 하며, 이런 기기들을 설치/운용하는 시설을 `데이터 센터` 라고 함
    - 초기 비용이 많이 들지만, 운용 비용의 비율은 낮은 편
    - 설치/설정에 시간이 많이 걸려서 준비 기간이 길어진다
    - 기기는 사용자가 자유롭게 이용, 구성 가능
- 클라우드
    - 중앙의 서버 컴퓨팅 자원을 활용하여 서비스를 받을 수 있다
    - 내부의 모든 하드웨어를 서비스 제공자가 관리하므로 장애에 대해 신경쓰지 않아도 된다
    - 시스템 구성 자유도는 낮고, 비용이 커질 수 있다

### 가상화

- 원하는 사양의 서버를 가상으로 생성해 사용할 수 있게 해주는 기술
- `가상 서버`는 **물리 서버나 메모리의 자원을 일부 독점해, 물리적으로 독립된 서버처럼 동작**함
    - 물리 서버를 1대씩 대여하다보면, 서버 대수가 모자를 수 있어서 1개의 물리 서버 내에 여러 개의 가상 서버를 구축하여 대량 서버 제공 가능
    - 실제 기기 자체는 물리XX, 가상화 기술로 생성된 기기를 가상XX라고 함

### 서버리스

- **서비스가 이용될 때만 서버를 가동**하는 방식의 서비스
    - 요금 부과되는 시간을 줄여 비용 낮출 수 있다

vs. 프로비저닝 방식

- 사용자를 위해 특정 서버를 제공 (provision) 하는 방식
- 서버를 계속 실행중이므로 언제든 사용 가능

### 개방형 클라우드 vs. 폐쇄형 클라우드

- 개방형 클라우드 : 모든 사람이 쓸 수 있게 공개된 형태
    - 전용 기기를 사용자에게 할당하거나 (베어메탈 - 하드웨어 상에 SW 설치 안된 상태), 가상으로 사용자 점유 공간을 제공하는 VPC 서비스가 존재
        - 베어메탈 : 가상화가 아닌 **물리서버** 제공, 직접 하드웨어 리소스에 액세스 가능
        - VPC : **클라우드 내에서 가상 네트워크** 만들고 관리하는 서비스
- 폐쇄형 클라우드 : 외부에 공개하지 않도록 기업 내부에 구축하는 형태
    - 온프레미스에 가까운 형태

### 서비스 제공 형태에 따른 클라우드 분류

- SaaS : 응용 프로그램을 서비스로 제공하는 형태
    - Gmail, Dropbox, Zoom
- PaaS / IaaS : 응용 프로그램을 만들기 위한 기능을 서비스로 제공
    - 둘의 차이는, `클라우드 서비스 제공자가 관리하는 범위`에 따라 달라짐
    - PaaS : **OS + 미들웨어**까지 관리하며 **필수 기능만 사용자에게 제공**
        - AWS 관리형 서비스인 RDS, DynamoDB, Lambda 이 해당되며, AWS 가 제공하는 범위 내에서 자유롭게 기능 이용 가능
    - IaaS : **서버 및 네트워크 기능**만 제공, **설정+관리는 사용자의 몫**
        - EC2, VPC, EBS 와 같이 사용자가 자유롭게 설정 가능한 서비스가 해당됨

### AWS 와 사용자간의 책임 공유

- 온프레미스 : HW 문제 발생 시 사용자가 책임 지고 수리, 복구
- AWS : HW 문제 발생 시 AWS 가 책임지고 복구 <br>
    → 이러한 책임범위를 `공동 책임 모델` 형태로 정의
    - 책임 범위는 이용하는 서비스에 따라 다름
    - 보통 클라우드 내 SW 나 설정은 사용자가 책임지며 관리하고, HW와 같은 기본 환경은 AWS 가 책임짐
    

### 리전과 가용영역

- 각 `리전` (ex. 서울 리전) 에 여러 개의 `가용 영역` (AZ) 가 존재하며, 가용영역은 하나 이상의 `데이터 센터`로 구성됨
    - AZ 는 **서로 다른 위치에 존재**, 따라서 대규모 장애 발생하더라도 다른 AZ 에서 서비스 제공 가능

### 장애를 예상한 설계

- AWS 는 ‘장애는 언제라도 발생할 수 있다’ 는 전제로 설계하며, 장애를 발생시키지 않는 것이 아니라 **장애가 발생하더라도 서비스를 지속 제공할 수 있는 가용성을 가지고 설계했다**. `Design For Failure`
    - 서버를 여러 AZ에 배포해서, 1개 이상의 AZ에 장애 발생해도 중단없이 서비스 제공 가능
    - `가용성` : 중단없이 계속해서 시스템을 실행할 수 있는 능력

### Well-Architected 프레임워크

- 아키텍처 관련 모범 사레를 모아, 사용자가 안전, 효율적인 인프라를 구축할 수 있게 지원하는 프레임워크
    - https://d1.awsstatic.com/whitepapers/ko_KR/architecture/AWS_Well-Architected_Framework.pdf
    - https://wa.aws.amazon.com/index.ko.html

### 대표적인 서비스

- 컴퓨팅 서비스 : 응용 프로그램, 미들웨어를 동작시키기 위한 `가상 서버 환경` 제공
    - EC2
    - ECS (컨테이너 서비스) : 컨테이너를 쉽게 실행/중지 및 관리할 수 있게 해주는 서비스
- 스토리지 서비스 : 파일 저장하는 서비스 (가상 디스크, 가상 스토리지)
    - EBS (Elastic Block Storage) : 사용이 쉽고, 확장 가능한 고성능 블록 스토리지 서비스로 EC2 용으로 설계됨
    - S3
- 네트워크 및 콘텐츠 전송 서비스 : 각 서비스를 연결하는 네트워크와 사용자에게 콘텐츠를 제공하는 기능을 가짐 (AWS 내부 가상 네트워크, DNS, CDN, 온프레미스 - AWS 연결하는 전용 회선)
    - VPC (Virtual Private Cloud) : 가상의 폐쇄형 클라우드 환경 구현
    - Route 53 : 가용성, 확장성이 뛰어난 DNS (도메인 이름 → IP 주소로 변환) 웹 서비스
    - ELB (Elastic Load Balancing) : VPC 에 탑재하여 사용하며, VPC 내에서 하나의 형태로 존재하고, 다수의 네트워크 인터페이스를 가지며 사설 IP, 공인 IP 를 모두 보유 가능 / 사용자 요청을 받아들여 서비스분산 처리
- 데이터베이스
    - RDS
    - DynamoDB : 완전관리형의 서버리스 키-값 NoSQL 데이터베이스
- 보안, 자격 증명 : AWS 자체 로그인 관리 및 인증 서비스, 암호화 서비스

### 관리형 서비스 vs. 완전 관리형 서비스 vs. 비관리형 서비스

- 관리형 서비스 : 서비스를 이용하기 위한 관리, 운영을 클라우드 서비스 제공자가 수행
    - RDS, S3 와 같은 대부분이 이에 해당
- 완전 관리형 서비스 : 사용자가 직접 관리할 필요 없는 서비스
    - Aurora - 데이터 양에 따라 저장영역을 자동으로 확장하는 기능을 가짐 (MySQL 및 PostgreSQL과 호환되는 완전 관리형 관계형 데이터베이스 엔진으로, RDS 의 일부)
- 비관리형 서비스 : 사용자가 직접 OS 설정 관리하거나 장애 대응해야 하는 서비스
    - EC2
